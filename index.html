<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <button id="closeButton">Нажми на меня</button>

    <script>
        // Проверка, что ваша веб-страница загружена внутри Telegram WebApp
        if (window.Telegram.WebApp) {
          // Инициализация WebApp, чтобы получить данные текущего пользователя
          Telegram.WebApp.ready();
      
          // Отправка отладочного сообщения обратно в бота
          Telegram.WebApp.sendData("WebApp ready");
        }
      
        document.getElementById('closeButton').addEventListener('click', function() {
          // Функция для отправки сообщения обратно в бота
          function sendMessageToBot(message) {
            Telegram.WebApp.sendData(message);
          }
      
          // Отправка отладочного сообщения обратно в бота перед попыткой закрыть WebApp
          sendMessageToBot("Button clicked, attempting to close WebApp");
      
          // Закрытие WebApp после выполнения операции
          Telegram.WebApp.close();
        });
      </script>
      
</body>
</html>
